@using MyApplication.Services
@inject AuthService AuthService
@inject NavigationManager Navigation
@inject ISnackbar Snackbar

<MudNavMenu>
    @if (!AuthService.IsAuthenticated)
    {
        <MudNavLink Href="/login" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Login">
            ğŸ”‘ à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸š
        </MudNavLink>
    }
    else
    {
        <MudText Typo="Typo.subtitle2" Class="pa-4" Color="Color.Primary">
            à¸¢à¸´à¸™à¸”à¸µà¸•à¹‰à¸­à¸™à¸£à¸±à¸š @AuthService.CurrentUser?.DisplayName
        </MudText>
        
        <MudNavLink Href="/dashboard" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Dashboard">
            ğŸ“Š Dashboard à¸ªà¸²à¸¡à¸µ
        </MudNavLink>

        @if (AuthService.CurrentUser?.Role == "à¹€à¸¡à¸µà¸¢")
        {
            <MudNavLink Href="/admin" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.AdminPanelSettings">
                ğŸ‘‘ Admin à¹€à¸¡à¸µà¸¢
            </MudNavLink>
            
            <MudNavLink Href="/docs" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Description">
                ğŸ“š Documentation
            </MudNavLink>
        }
    }
    
    <MudNavLink Href="/request" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Send">
        ğŸ’Œ à¸‚à¸­à¸­à¸™à¸¸à¸à¸²à¸•
    </MudNavLink>

    @if (AuthService.IsAuthenticated)
    {
        <MudDivider Class="my-2" />
        <MudNavLink OnClick="@HandleLogout" Icon="@Icons.Material.Filled.Logout">
            ğŸšª à¸­à¸­à¸à¸ˆà¸²à¸à¸£à¸°à¸šà¸š
        </MudNavLink>
    }
</MudNavMenu>

@code {
    private async Task HandleLogout()
    {
        await AuthService.LogoutAsync();
        Snackbar.Add("à¸­à¸­à¸à¸ˆà¸²à¸à¸£à¸°à¸šà¸šà¹€à¸£à¸µà¸¢à¸šà¸£à¹‰à¸­à¸¢à¹à¸¥à¹‰à¸§! ğŸ‘‹", Severity.Info);
        Navigation.NavigateTo("/login");
    }
}


